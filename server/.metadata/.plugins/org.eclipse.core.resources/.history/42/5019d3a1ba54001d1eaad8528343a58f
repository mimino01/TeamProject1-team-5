package 과제정리;

import java.util.Arrays;

public class h402 {
	public static int P(int[] A) {
		int result = 0;
		for (int i = 0; i < A.length; i++) {
			for (int j = i; j < A.length; j++) {
				if (A[i] < A[j]) {
					result++;
				}
			}
		}
		return result;
	}
	
	public static int SA(int[] A, int i, int j) {
		int result = 0;
		if (i == j) {
			return 0;
		} else {
			result += SA(A, i, (i+j)/2);
			result += SA(A, (i+j)/2 + 1, j);
			return M(A, i, j) + result;
		}
	}
	
	public static int M(int[] A, int i, int j) {
		System.out.println("M" + Arrays.toString(A) + ":" + i + ":" + j);
		int left = i, right = (i + j) / 2, SI = i;
		int[] sort = new int[A.length];
		int result = 0;
		
		while (left <= (i + j) / 2 && right <= j) {
			if (A[left] < A[right]) {
				sort[SI++] = A[left++];
				result += j - right + 1;
			} else {
				sort[SI++] = A[right++];
			}
		}
		
		if (left > (i + j) / 2) {
			while (right <= j) {
				System.out.println("right" + SI + ":" + right);
				sort[SI++] = A[right++];
			}
		} else {
			while (left <= (i + j) / 2) {
				System.out.println("left" + SI + ":" + left);
				sort[SI++] = A[left++];
			}
		}
		
		for (int k = i; k <= j; k++) {
			A[k] = sort[k];			
		}
		
		return result;
	}
	
	public static void main(String[] args) {
		int[] A = {82,35,27,96,73,14,58,49};
		System.out.println("억지: " + P(A));
		System.out.println("분할: " + SA(A, 0, A.length - 1));
	}
}
